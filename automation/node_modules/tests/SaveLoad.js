/**
 * @class   SaveLoadTest
 * @brief   Test the one hop for gene and report errors
 * @details
 * @authors Mike Wong mikewong@sfsu.edu, Nayana Laxmeshwar nlaxmeshwar@mail.sfsu.edu
 * @ingroup tests
*/

const Test            = require( '../tests/Test' );
const Table           = require( '../ui-automation/view/Table' );
const Graph           = require( '../ui-automation/view/Graph' );
const ConfidenceScore = require( '../ui-automation/ConfidenceScore' );
const Filter          = require( '../ui-automation/Filter' );
const SaveLoad        = require( '../ui-automation/SaveLoad' );
const mixwith         = require( 'mixwith' );
const mix             = mixwith.mix;

class SaveLoadTest extends mix( Test ).with( SaveLoad, ConfidenceScore, Filter, Table, Graph ) {
	get name() { return "Save and Load"; }

	execute(){
		return new Promise( async ( resolve, reject ) => {
			try {
				await this.login();
				await this.oneHop();
				await this.search( 'fentanyl' );
				await this.confidence.score.high();
				await this.filter.excerpt.is( 'opioid' );
				await this.graph.redraw();

				await this.save( 'Fentanyl effect on opioids' );

				resolve( this.result( true, "Save and Upload features work as tested" ));
			} catch( e ) {
				reject( e );
			}
		});
	}
}

module.exports = SaveLoadTest;
