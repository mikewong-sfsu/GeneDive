
/**
 * @class   FilterTest_Article
 * @brief   Test to check if rows are filtered according to Article depending upon the parameter provided- IS or NOT. 
 * @details
 * @authors Mike Wong mikewong@sfsu.edu, Vaishali Bisht vbisht1@mail.sfsu.edu
 * @ingroup tests
 **/

const Test    = require( '../tests/Test' );
const Filter  = require( '../ui-automation/Filter' );
const Table   = require( '../ui-automation/view/Table' );
const mixwith = require( 'mixwith' );
const mix     = mixwith.mix;

class FilterTest extends mix( Test ).with( Filter, Table ) {
	get name() { return "Filter Test"; }

	execute() {
		return new Promise( async ( resolve, reject ) => {
			try {
				let dgr       = 'PCAD';
				let dgrFilter = 'breast cancer';
				let article   = '18001487';
				let phrase    = 'cancer';
				let journal   = 'PMC';

				await this.login();
				await this.oneHop();
				await this.search( dgr );

				await this.filter.article.not( article );
				await this.filter.dgr.is( dgrFilter );
				await this.filter.excerpt.is( phrase );
				await this.filter.journal.is( journal );
				let filters = await this.filters.applied();
/*
				for( let filter of filters ) {
					await this.filter.remove( filter );
				}
*/

			} catch( e ) {
				reject( e );
			}
		});
	}
}

module.exports = FilterTest;
